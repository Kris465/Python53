### **Конспект лекции: Циклы в JavaScript (`while`, `for`, `do...while`)**

**Тема:** 1.6 Циклы в JavaScript (`while`, `for`, `do...while`).
**Цель:** Освоить синтаксис циклов в JavaScript, научиться использовать цикл `for` с счетчиком, понимать механику бесконечных циклов и способы их контроля.

---

## **Синтаксис циклов в JavaScript**

### **Базовые правила синтаксиса:**

1. **Круглые скобки** `()` вокруг условия
2. **Фигурные скобки** `{}` для тела цикла  
3. **Точка с запятой** после инструкций
4. **Правильные операторы** для изменения счетчика

```javascript
// ПРАВИЛЬНЫЙ СИНТАКСИС:
while (условие) {
    // тело цикла
    инструкция;
}

for (инициализация; условие; шаг) {
    // тело цикла
    инструкция;
}

do {
    // тело цикла
    инструкция;
} while (условие);
```

---

## **Цикл `while` - цикл с предусловием**

### **Синтаксис:**
```javascript
while (условие) {
    // код выполняется пока условие true
}
```

### **Примеры:**

**Пример 1: Счетчик**
```javascript
let i = 0;
while (i < 5) {
    console.log(`Итерация: ${i}`);
    i++; // не забываем изменять счетчик!
}
```

**Пример 2: Обработка до условия**
```javascript
let password = "";
while (password !== "secret123") {
    password = prompt("Введите пароль:");
}
console.log("Доступ разрешен!");
```

---

## **Цикл `do...while` - цикл с постусловием**

### **Синтаксис:**
```javascript
do {
    // код выполняется хотя бы один раз
} while (условие);
```

### **Ключевое отличие от `while`:**
- `while` - сначала проверка, потом выполнение
- `do...while` - сначала выполнение, потом проверка

### **Примеры:**

**Пример 1: Гарантированное выполнение**
```javascript
let userAnswer;
do {
    userAnswer = prompt("Вам нравится JavaScript? (да/нет):");
} while (userAnswer !== "да" && userAnswer !== "нет");

console.log(`Ваш ответ: ${userAnswer}`);
```

**Пример 2: Меню программы**
```javascript
let choice;
do {
    console.log("1. Показать время");
    console.log("2. Показать дату"); 
    console.log("3. Выход");
    choice = prompt("Выберите опцию:");
    
    switch(choice) {
        case "1": console.log(new Date().toLocaleTimeString()); break;
        case "2": console.log(new Date().toLocaleDateString()); break;
    }
} while (choice !== "3");

console.log("Программа завершена");
```

---

## **Цикл `for` с счетчиком - основной инструмент**

### **Детальный синтаксис:**
```javascript
for (инициализация; условие_продолжения; шаг_итерации) {
    // тело цикла
}
```

### **Компоненты цикла `for`:**

1. **Инициализация** - выполняется один раз перед началом
2. **Условие продолжения** - проверяется перед каждой итерацией
3. **Шаг итерации** - выполняется после каждой итерации

### **Примеры различных вариантов `for`:**

**Пример 1: Классический счетчик**
```javascript
for (let i = 0; i < 5; i++) {
    console.log(i); // 0, 1, 2, 3, 4
}
```

**Пример 2: Обратный отсчет**
```javascript
for (let i = 10; i > 0; i--) {
    console.log(i); // 10, 9, 8, ..., 1
}
console.log("Старт!");
```

**Пример 3: С пользовательским шагом**
```javascript
// Четные числа
for (let i = 0; i <= 10; i += 2) {
    console.log(i); // 0, 2, 4, 6, 8, 10
}

// Кратные 3
for (let i = 3; i <= 30; i += 3) {
    console.log(i); // 3, 6, 9, ..., 30
}
```

**Пример 4: Несколько переменных в инициализации**
```javascript
for (let i = 0, j = 10; i < j; i++, j--) {
    console.log(`i=${i}, j=${j}`);
}
```
**Вывод:**
```
i=0, j=10
i=1, j=9
i=2, j=8
i=3, j=7
i=4, j=6
```

**Пример 5: Пропуск компонентов**
```javascript
let i = 0;
for (; i < 3;) { // без инициализации и шага
    console.log(i);
    i++;
}
```

---

## **Бесконечные циклы и их прерывание**

### **Что такое бесконечный цикл?**
Цикл, условие выхода из которого никогда не выполняется.

### **Случайные бесконечные циклы (ОШИБКИ):**

**Пример 1: Забыли изменить счетчик**
```javascript
// БЕСКОНЕЧНЫЙ ЦИКЛ!
let i = 0;
while (i < 5) {
    console.log(i);
    // забыли i++ - цикл никогда не закончится
}
```

**Пример 2: Неправильное условие**
```javascript
// БЕСКОНЕЧНЫЙ ЦИКЛ!
for (let i = 0; i >= 0; i++) {
    console.log(i); // i всегда >= 0
}
```

**Пример 3: Постоянно true условие**
```javascript
// БЕСКОНЕЧНЫЙ ЦИКЛ!
while (true) {
    console.log("Бесконечно...");
}
```

### **Контролируемые бесконечные циклы (ПРАВИЛЬНО):**

**Пример 1: Серверное приложение**
```javascript
let isRunning = true;

while (isRunning) {
    // обработка запросов
    console.log("Сервер работает...");
    
    // через некоторое время останавливаем
    setTimeout(() => {
        isRunning = false;
        console.log("Сервер остановлен");
    }, 5000);
    break; // для демонстрации
}
```

**Пример 2: Игровой цикл**
```javascript
let gameActive = true;
let frameCount = 0;

while (gameActive) {
    // обновление состояния игры
    frameCount++;
    console.log(`Кадр: ${frameCount}`);
    
    // условие выхода
    if (frameCount >= 10) {
        gameActive = false;
        console.log("Игра завершена");
    }
}
```

---

## **Прерывание циклов: `break` и `continue`**

### **Оператор `break` - полный выход**

```javascript
// Поиск первого подходящего элемента
const numbers = [1, 3, 5, 8, 10, 12];

for (let i = 0; i < numbers.length; i++) {
    if (numbers[i] > 7) {
        console.log(`Первое число больше 7: ${numbers[i]}`);
        break; // выходим сразу после нахождения
    }
}
```

### **Оператор `continue` - переход к следующей итерации**

```javascript
// Пропуск нечетных чисел
for (let i = 0; i < 10; i++) {
    if (i % 2 !== 0) {
        continue; // пропускаем нечетные числа
    }
    console.log(i); // выведет только 0, 2, 4, 6, 8
}
```

### **Метки для вложенных циклов**

```javascript
outerLoop: for (let i = 0; i < 3; i++) {
    console.log(`Внешний цикл: ${i}`);
    
    innerLoop: for (let j = 0; j < 3; j++) {
        if (i === 1 && j === 1) {
            console.log("Прерываем внешний цикл");
            break outerLoop;
        }
        console.log(`  Внутренний цикл: ${j}`);
    }
}
```

---

## **Практические примеры**

### **Пример 1: Валидация ввода**
```javascript
let userNumber;

while (true) { // контролируемый бесконечный цикл
    userNumber = parseInt(prompt("Введите число от 1 до 100:"));
    
    if (isNaN(userNumber)) {
        console.log("Это не число!");
        continue; // возвращаемся к началу цикла
    }
    
    if (userNumber >= 1 && userNumber <= 100) {
        break; // выходим из цикла при правильном вводе
    }
    
    console.log("Число должно быть от 1 до 100!");
}

console.log(`Вы ввели: ${userNumber}`);
```

### **Пример 2: Обработка массива с условиями**
```javascript
const students = [
    { name: "Анна", grade: 85, active: true },
    { name: "Иван", grade: 45, active: false },
    { name: "Мария", grade: 92, active: true },
    { name: "Петр", grade: 38, active: true },
    { name: "Ольга", grade: 78, active: false }
];

let passedCount = 0;

for (let i = 0; i < students.length; i++) {
    const student = students[i];
    
    // Пропускаем неактивных студентов
    if (!student.active) {
        console.log(`${student.name} - неактивный студент, пропускаем`);
        continue;
    }
    
    // Проверяем оценку
    if (student.grade >= 60) {
        console.log(`${student.name} - сдал(а) с оценкой ${student.grade}`);
        passedCount++;
    } else {
        console.log(`${student.name} - не сдал(а), оценка ${student.grade}`);
    }
}

console.log(`Всего сдали: ${passedCount} студентов`);
```

### **Пример 3: Генератор паролей**
```javascript
function generatePassword(length) {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    let password = "";
    
    for (let i = 0; i < length; i++) {
        const randomIndex = Math.floor(Math.random() * chars.length);
        password += chars[randomIndex];
    }
    
    return password;
}

// Генерация 5 паролей
for (let i = 1; i <= 5; i++) {
    console.log(`Пароль ${i}: ${generatePassword(8)}`);
}
```

---

## **Распространенные ошибки и отладка**

### **Ошибка 1: Забытый инкремент**
```javascript
// НЕПРАВИЛЬНО:
for (let i = 0; i < 5;) {
    console.log(i); // бесконечный цикл!
}

// ПРАВИЛЬНО:
for (let i = 0; i < 5; i++) {
    console.log(i);
}
```

### **Ошибка 2: Использование `var` вместо `let`**
```javascript
// ПРОБЛЕМА (устаревший подход):
for (var i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 100); // выведет 3, 3, 3
}

// РЕШЕНИЕ (современный подход):
for (let i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 100); // выведет 0, 1, 2
}
```

### **Ошибка 3: Изменение длины массива во время итерации**
```javascript
const numbers = [1, 2, 3, 4, 5];

// ОПАСНО:
for (let i = 0; i < numbers.length; i++) {
    if (numbers[i] === 3) {
        numbers.splice(i, 1); // изменяем массив во время итерации
    }
}

// БЕЗОПАСНО (итерация с конца):
for (let i = numbers.length - 1; i >= 0; i--) {
    if (numbers[i] === 3) {
        numbers.splice(i, 1);
    }
}
```

### **Отладка циклов:**
```javascript
for (let i = 0; i < 5; i++) {
    console.log(`Начало итерации ${i}`);
    
    // отладочная информация
    console.log("Текущее состояние переменных:", { i });
    
    if (i === 2) {
        console.log("Особая логика для i = 2");
    }
    
    console.log(`Конец итерации ${i}`);
    console.log("---"); // разделитель для читаемости
}
```

---

## **Сравнение циклов: когда что использовать?**

| Цикл | Когда использовать | Пример |
|------|-------------------|---------|
| `for` | Известно количество итераций | `for (let i = 0; i < 10; i++)` |
| `while` | Неизвестно количество итераций | `while (userInput !== 'quit')` |
| `do...while` | Нужно выполнить хотя бы один раз | `do { ... } while (!isValid)` |

### **Правила выбора:**

1. **`for`** - когда знаете СКОЛЬКО раз нужно выполнить
2. **`while`** - когда знаете КОГДА нужно остановиться  
3. **`do...while`** - когда нужно гарантировать хотя бы одно выполнение

---

## **Итоги урока**

### **Ключевые моменты:**
- **Синтаксис циклов** требует круглых скобок и фигурных скобок
- **`for`** - основной цикл для работы со счетчиками
- **`while`** - цикл с предусловием, проверка перед выполнением
- **`do...while`** - цикл с постусловием, выполнение перед проверкой
- **Бесконечные циклы** могут быть как ошибкой, так и инструментом
- **`break` и `continue`** позволяют гибко управлять выполнением циклов

### **Практические рекомендации:**
1. Всегда проверяйте условие выхода из цикла
2. Используйте `let` вместо `var` в циклах
3. Избегайте изменения коллекций во время итерации
4. Для отладки добавляйте console.log() в циклы
5. Используйте контролируемые бесконечные циклы с условиями выхода
6. Выбирайте тип цикла в зависимости от задачи

**Совет:** Практикуйтесь с разными типами циклов, чтобы развить интуицию для выбора подходящего инструмента в каждой ситуации!